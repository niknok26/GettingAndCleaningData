# Coursera: Data Science Specialization
## Getting and Cleaning Data Course Project
The purpose of this project is to demonstrate your ability to collect, work with, and clean a data set.

## Original Source Data (INPUT)
Original data is taken from the downloaded file [getdata-projectfiles-UCI HAR Dataset.zip](https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip) containing the following folders and files:

* __UCI HAR Dataset (folder)__
    + activity_labels.txt: Contains the activity labels (i.e. "WALKING","STANDING",etc.)
    + features_info.txt: Description of features used
    + features.txt: Complete list of features (used as variable names for the dataset)
    + README.txt: Overview of how the data/activity came about
    + __test(folder)__ : Data for test subjects
        - __Intertial Signals(folder)__
            * body_acc_x_test.txt
            * body_acc_y_test.txt
            * body_acc_z_test.txt
            * body_gyro_x_test.txt
            * body_gyro_y_test.txt
            * body_gyro_z_test.txt
            * total_acc_x_test.txt
            * total_acc_y_test.txt
            * total_acc_z_test.txt
        - subject_test.txt: List of test subjects (used as a column for subjects)
        - X_test.txt: List of measures as listed in features.txt
        - y_test.txt: List of activities(numeric) and mapped to activity_labels.txt
    + __train(folder)__: Data for train subjects
        - __Intertial Signals(folder)__
            * body_acc_x_train.txt
            * body_acc_y_train.txt
            * body_acc_z_train.txt
            * body_gyro_x_train.txt
            * body_gyro_y_train.txt
            * body_gyro_z_train.txt
            * total_acc_x_train.txt
            * total_acc_y_train.txt
            * total_acc_z_train.txt
        - subject_train.txt: List of test subjects (used as a column for subjects)
        - X_train.txt: List of measures as listed in features.txt
        - y_train.txt: List of activities(numeric) and mapped to activity_labels.txt

## Script Flow _run_analysis.R_ (PROCESS)
1. The zipfile in the link above is downloaded to a working directory, where it is extracted.  The resulting directory structure should be identical to what is specified above.  The zipfile contains and maintains the directory structure.  Commands that rely on folders/files assume that the zip file was properly extracted.

2. Source files extracted in STEP 1 would need to be loaded into R objects for some tidying. There first two R objects would contain the activity labels and features.

    ~~~~
    # Read in the features.  This will be used as variables
    features <- read.table("./UCI HAR Dataset/features.txt",col.names=c("code","name"))
    # Read in the activity labels. They will be used later as replacement to the numeric activity values
    activityLabels <- read.table("./UCI HAR Dataset/activity_labels.txt",col.names=c("code","activity"))
    ~~~~
    
3. Tidy up the names from the _features.txt_.  The names will be used for the column names of the dataset, and there are characters that are either not allowed, or are not ideal for column names.  The following code strips/replaces certain characters for the character strings.

    ~~~~
    # Tidy up the feature names to a more friendly  >> GOAL 4 <<
    features$name <- gsub("\\(|\\)|,","",features$name)
    features$name <- gsub("-|\\.","_",features$name)
    ~~~~

4. The third and main object will contain the result data set with all the tranformations indicated in the excercise.  The object features$name that was made tidy in the previous step will be used to define the column names of the data set. 

    ~~~~
    # Load everything in one object in one go #  >> GOAL 1 <<
    bigData <-  
              # Combine the rows of the two data sets read below into one big data set
              rbind(
                  # Combine the 3 files read into columns
                  cbind(
                    # Read data from test
                    #source="test",
                    read.table("./UCI HAR Dataset/test/subject_test.txt",col.names=c("subject")),
                    read.table("./UCI HAR Dataset/test/y_test.txt",col.names = c("activity")),
                    read.table("./UCI HAR Dataset/test/X_test.txt",col.names=as.character(features$name))
                  ),
                  # Combine the 3 files read into columns
                  cbind(
                    # Read data from train
                    #source="train",
                    read.table("./UCI HAR Dataset/train/subject_train.txt",col.names=c("subject")),
                    read.table("./UCI HAR Dataset/train/y_train.txt",col.names = c("activity")),
                    read.table("./UCI HAR Dataset/train/X_train.txt",col.names=as.character(features$name))
                  )
                )
    ~~~~
    _Note: The files under the folder Intertial Signals need to be loaded as it is not necessary for this excercise_

5. As part of the excercise, the values of the "activity" attribute would need to be changed from a numeric code, to a more readable string.  The string values were loaded in STEP 2 to the _activityLables_ object.  The _mutate_ function call will be used to replace the numeric codes to string values.

    ~~~~
    bigData <- bigData %>% 
                # Replace numeric activity values to proper labels
                # >> GOAL 3 <<
                mutate(activity = activityLabels[ bigData$activity,2 ]) %>%
                ...
                ...
    ~~~~

6. The activity will only be concerned with variables computing for the _mean()_ or _std()_ or _meanFreq()_ of the measures.  Columns would need to be selected corresponing to these computations (retaining subject and activity).  This effectively reduces the variables of the data set.

    ~~~~
                ...
                ...
                # Take out columns that are not for mean() or std() or meanFreq(), 
                # but retain the first two columns: subject (column 1) and activity (column 2).
                # Concatenate column 1 and 2 with the rest of the columns that satisfy the condition.
                # >> GOAL 2 <<
                select(c(1,2,2 + grep(".*[Mm][Ee][Aa][Nn].*|.*[Ss][Tt][Dd].*",features$name))) %>%
                ...
                ...
    ~~~~

7. The mean for the measures of the remaining columns are taken per subject, per activity.  This is achieved by the following piece of code.

    ~~~~
                ...
                ...
                # Group by subject and activity
                # Summarize to take the average(mean) based on grouping for all other variables
                # >> GOAL 5 <<
                group_by(subject,activity) %>%
                summarize_each(funs(mean))
    ~~~~

8. The final result data set is written to a CSV file, _tidy_output.csv_.

    ~~~~
    # Write file to tidy_output.txt
    write.csv(bigData,"./tidy_output.csv")
    ~~~~

## New Dataset for Further Analysis (OUTPUT)
The R workspace will contain the following objects after STEP 2 of the process above.

* __activityLabels__: _This object contains the labels do be used to replace the numeric activity values for the dataset_
    + _code_ : numeric code that will map(key) to the numeric values on the data set.
    + _activity_ : character string representation of the different activities

~~~~
    'data.frame':	6 obs. of  2 variables:
    $ code    : int  1 2 3 4 5 6
    $ activity: Factor w/ 6 levels "LAYING","SITTING",..: 4 6 5 2 3 1
~~~~

* __features__: _This object contains the features to be used as column/variable names for the data set.  This will eventually be replaced by more readable names by one of the processing steps._
    + _code_ : numeric code of the features (key)
    + _name_ : character string for each of the different kinds of measure for the subjects

~~~~
'data.frame':	561 obs. of  2 variables:
 $ code: int  1 2 3 4 5 6 7 8 9 10 ...
 $ name: chr  "tBodyAcc_mean_X" "tBodyAcc_mean_Y" "tBodyAcc_mean_Z" "tBodyAcc_std_X" ...
~~~~

* __bigData__: 

~~~~
Classes 'grouped_df', 'tbl_df', 'tbl' and 'data.frame':	180 obs. of  88 variables:
 $ subject                           : int  1 1 1 1 1 1 2 2 2 2 ...
 $ activity                          : Factor w/ 6 levels "LAYING","SITTING",..: 1 2 3 4 5 6 1 2 3 4 ...
 $ time_BodyAcc_mean_X               : num  0.222 0.261 0.279 0.277 0.289 ...
 $ time_BodyAcc_mean_Y               : num  -0.04051 -0.00131 -0.01614 -0.01738 -0.00992 ...
 $ time_BodyAcc_mean_Z               : num  -0.113 -0.105 -0.111 -0.111 -0.108 ...
 $ time_BodyAcc_std_X                : num  -0.928 -0.977 -0.996 -0.284 0.03 ...
 $ time_BodyAcc_std_Y                : num  -0.8368 -0.9226 -0.9732 0.1145 -0.0319 ...
 $ time_BodyAcc_std_Z                : num  -0.826 -0.94 -0.98 -0.26 -0.23 ...
 $ time_GravityAcc_mean_X            : num  -0.249 0.832 0.943 0.935 0.932 ...
 $ time_GravityAcc_mean_Y            : num  0.706 0.204 -0.273 -0.282 -0.267 ...
 $ time_GravityAcc_mean_Z            : num  0.4458 0.332 0.0135 -0.0681 -0.0621 ...
 $ time_GravityAcc_std_X             : num  -0.897 -0.968 -0.994 -0.977 -0.951 ...
 $ time_GravityAcc_std_Y             : num  -0.908 -0.936 -0.981 -0.971 -0.937 ...
 $ time_GravityAcc_std_Z             : num  -0.852 -0.949 -0.976 -0.948 -0.896 ...
 $ time_BodyAccJerk_mean_X           : num  0.0811 0.0775 0.0754 0.074 0.0542 ...
 $ time_BodyAccJerk_mean_Y           : num  0.003838 -0.000619 0.007976 0.028272 0.02965 ...
 $ time_BodyAccJerk_mean_Z           : num  0.01083 -0.00337 -0.00369 -0.00417 -0.01097 ...
 $ time_BodyAccJerk_std_X            : num  -0.9585 -0.9864 -0.9946 -0.1136 -0.0123 ...
 $ time_BodyAccJerk_std_Y            : num  -0.924 -0.981 -0.986 0.067 -0.102 ...
 $ time_BodyAccJerk_std_Z            : num  -0.955 -0.988 -0.992 -0.503 -0.346 ...
 $ time_BodyGyro_mean_X              : num  -0.0166 -0.0454 -0.024 -0.0418 -0.0351 ...
 $ time_BodyGyro_mean_Y              : num  -0.0645 -0.0919 -0.0594 -0.0695 -0.0909 ...
 $ time_BodyGyro_mean_Z              : num  0.1487 0.0629 0.0748 0.0849 0.0901 ...
 $ time_BodyGyro_std_X               : num  -0.874 -0.977 -0.987 -0.474 -0.458 ...
 $ time_BodyGyro_std_Y               : num  -0.9511 -0.9665 -0.9877 -0.0546 -0.1263 ...
 $ time_BodyGyro_std_Z               : num  -0.908 -0.941 -0.981 -0.344 -0.125 ...
 $ time_BodyGyroJerk_mean_X          : num  -0.1073 -0.0937 -0.0996 -0.09 -0.074 ...
 $ time_BodyGyroJerk_mean_Y          : num  -0.0415 -0.0402 -0.0441 -0.0398 -0.044 ...
 $ time_BodyGyroJerk_mean_Z          : num  -0.0741 -0.0467 -0.049 -0.0461 -0.027 ...
 $ time_BodyGyroJerk_std_X           : num  -0.919 -0.992 -0.993 -0.207 -0.487 ...
 $ time_BodyGyroJerk_std_Y           : num  -0.968 -0.99 -0.995 -0.304 -0.239 ...
 $ time_BodyGyroJerk_std_Z           : num  -0.958 -0.988 -0.992 -0.404 -0.269 ...
 $ time_BodyAccMag_mean              : num  -0.8419 -0.9485 -0.9843 -0.137 0.0272 ...
 $ time_BodyAccMag_std               : num  -0.7951 -0.9271 -0.9819 -0.2197 0.0199 ...
 $ time_GravityAccMag_mean           : num  -0.8419 -0.9485 -0.9843 -0.137 0.0272 ...
 $ time_GravityAccMag_std            : num  -0.7951 -0.9271 -0.9819 -0.2197 0.0199 ...
 $ time_BodyAccJerkMag_mean          : num  -0.9544 -0.9874 -0.9924 -0.1414 -0.0894 ...
 $ time_BodyAccJerkMag_std           : num  -0.9282 -0.9841 -0.9931 -0.0745 -0.0258 ...
 $ time_BodyGyroMag_mean             : num  -0.8748 -0.9309 -0.9765 -0.161 -0.0757 ...
 $ time_BodyGyroMag_std              : num  -0.819 -0.935 -0.979 -0.187 -0.226 ...
 $ time_BodyGyroJerkMag_mean         : num  -0.963 -0.992 -0.995 -0.299 -0.295 ...
 $ time_BodyGyroJerkMag_std          : num  -0.936 -0.988 -0.995 -0.325 -0.307 ...
 $ FFT_BodyAcc_mean_X                : num  -0.9391 -0.9796 -0.9952 -0.2028 0.0382 ...
 $ FFT_BodyAcc_mean_Y                : num  -0.86707 -0.94408 -0.97707 0.08971 0.00155 ...
 $ FFT_BodyAcc_mean_Z                : num  -0.883 -0.959 -0.985 -0.332 -0.226 ...
 $ FFT_BodyAcc_std_X                 : num  -0.9244 -0.9764 -0.996 -0.3191 0.0243 ...
 $ FFT_BodyAcc_std_Y                 : num  -0.834 -0.917 -0.972 0.056 -0.113 ...
 $ FFT_BodyAcc_std_Z                 : num  -0.813 -0.934 -0.978 -0.28 -0.298 ...
 $ FFT_BodyAcc_meanFreq_X            : num  -0.1588 -0.0495 0.0865 -0.2075 -0.3074 ...
 $ FFT_BodyAcc_meanFreq_Y            : num  0.0975 0.0759 0.1175 0.1131 0.0632 ...
 $ FFT_BodyAcc_meanFreq_Z            : num  0.0894 0.2388 0.2449 0.0497 0.2943 ...
 $ FFT_BodyAccJerk_mean_X            : num  -0.9571 -0.9866 -0.9946 -0.1705 -0.0277 ...
 $ FFT_BodyAccJerk_mean_Y            : num  -0.9225 -0.9816 -0.9854 -0.0352 -0.1287 ...
 $ FFT_BodyAccJerk_mean_Z            : num  -0.948 -0.986 -0.991 -0.469 -0.288 ...
 $ FFT_BodyAccJerk_std_X             : num  -0.9642 -0.9875 -0.9951 -0.1336 -0.0863 ...
 $ FFT_BodyAccJerk_std_Y             : num  -0.932 -0.983 -0.987 0.107 -0.135 ...
 $ FFT_BodyAccJerk_std_Z             : num  -0.961 -0.988 -0.992 -0.535 -0.402 ...
 $ FFT_BodyAccJerk_meanFreq_X        : num  0.132 0.257 0.314 -0.209 -0.253 ...
 $ FFT_BodyAccJerk_meanFreq_Y        : num  0.0245 0.0475 0.0392 -0.3862 -0.3376 ...
 $ FFT_BodyAccJerk_meanFreq_Z        : num  0.02439 0.09239 0.13858 -0.18553 0.00937 ...
 $ FFT_BodyGyro_mean_X               : num  -0.85 -0.976 -0.986 -0.339 -0.352 ...
 $ FFT_BodyGyro_mean_Y               : num  -0.9522 -0.9758 -0.989 -0.1031 -0.0557 ...
 $ FFT_BodyGyro_mean_Z               : num  -0.9093 -0.9513 -0.9808 -0.2559 -0.0319 ...
 $ FFT_BodyGyro_std_X                : num  -0.882 -0.978 -0.987 -0.517 -0.495 ...
 $ FFT_BodyGyro_std_Y                : num  -0.9512 -0.9623 -0.9871 -0.0335 -0.1814 ...
 $ FFT_BodyGyro_std_Z                : num  -0.917 -0.944 -0.982 -0.437 -0.238 ...
 $ FFT_BodyGyro_meanFreq_X           : num  -0.00355 0.18915 -0.12029 0.01478 -0.10045 ...
 $ FFT_BodyGyro_meanFreq_Y           : num  -0.0915 0.0631 -0.0447 -0.0658 0.0826 ...
 $ FFT_BodyGyro_meanFreq_Z           : num  0.010458 -0.029784 0.100608 0.000773 -0.075676 ...
 $ FFT_BodyAccMag_mean               : num  -0.8618 -0.9478 -0.9854 -0.1286 0.0966 ...
 $ FFT_BodyAccMag_std                : num  -0.798 -0.928 -0.982 -0.398 -0.187 ...
 $ FFT_BodyAccMag_meanFreq           : num  0.0864 0.2367 0.2846 0.1906 0.1192 ...
 $ FFT_BodyAccJerkMag_mean           : num  -0.9333 -0.9853 -0.9925 -0.0571 0.0262 ...
 $ FFT_BodyAccJerkMag_std            : num  -0.922 -0.982 -0.993 -0.103 -0.104 ...
 $ FFT_BodyAccJerkMag_meanFreq       : num  0.2664 0.3519 0.4222 0.0938 0.0765 ...
 $ FFT_BodyGyroMag_mean              : num  -0.862 -0.958 -0.985 -0.199 -0.186 ...
 $ FFT_BodyGyroMag_std               : num  -0.824 -0.932 -0.978 -0.321 -0.398 ...
 $ FFT_BodyGyroMag_meanFreq          : num  -0.139775 -0.000262 -0.028606 0.268844 0.349614 ...
 $ FFT_BodyGyroJerkMag_mean          : num  -0.942 -0.99 -0.995 -0.319 -0.282 ...
 $ FFT_BodyGyroJerkMag_std           : num  -0.933 -0.987 -0.995 -0.382 -0.392 ...
 $ FFT_BodyGyroJerkMag_meanFreq      : num  0.176 0.185 0.334 0.191 0.19 ...
 $ angle_tBodyAccMeangravity         : num  0.021366 0.027442 -0.000222 0.060454 -0.002695 ...
 $ angle_tBodyAccJerkMeangravityMean : num  0.00306 0.02971 0.02196 -0.00793 0.08993 ...
 $ angle_tBodyGyroMeangravityMean    : num  -0.00167 0.0677 -0.03379 0.01306 0.06334 ...
 $ angle_tBodyGyroJerkMeangravityMean: num  0.0844 -0.0649 -0.0279 -0.0187 -0.04 ...
 $ angle_XgravityMean                : num  0.427 -0.591 -0.743 -0.729 -0.744 ...
 $ angle_YgravityMean                : num  -0.5203 -0.0605 0.2702 0.277 0.2672 ...
 $ angle_ZgravityMean                : num  -0.3524 -0.218 0.0123 0.0689 0.065 ...
~~~~

* _tidy_output.csv_: This is the output comma delimited text file for the bigData variable.  It contains all the variables and observations with the average of the selected variabled, grouped for each subject and activity.